# Astro development sandbox

## About

案件名 (2024.01~)構築のための環境です。

## Project information

### Production URL

https://example.com/

### Staging URL

https://stg.example.com/

## Git flow

一人で完結する時は `main` から作業ブランチ `feature/**` を切って作業を行ない完了後 `main` ブランチにマージ。  
複数人で開発する時は `m1` などのマイルストーンに関連したブランチを作成。`m1`を起点に作業ブランチを作成し完了後`m1`にマージしプレビューアップ。FIX後に `main` ブランチにマージを行い納品データの作成。

### Delivery & Differential data
1. `main` に作業ブランチをマージ
2. GitHub Actions にて `dist/production` にビルド後のファイルが生成されます
3. ファイル出力  
3-1. 全ファイルの場合、下記GitHubより納品データDL
3-2. 差分ファイルの場合、`dist/production` の前回納品からの差分を出力

## Tech Stack

- [Astro](https://astro.build/)
- [Vite](https://vitejs.dev/)
- [ESLint](https://github.com/eslint/eslint)
- [Stylelint](https://stylelint.io/)
- [Prettier](https://prettier.io/)
- [PLOP](https://plopjs.com/documentation/)
- CSS
  - [SASS](https://sass-lang.com/) 
  - [FLOCSS](https://github.com/hiloki/flocss)
  - [BEM](http://getbem.com/)
- JavaScript
  - [TypeScript](https://www.typescriptlang.org/)

## Getting Started

### Install dependencies

```bash
npm ci
```

### Start local server

```bash
npm run dev
```

## Directory

```bash
.
├── plop/               # Contains template files for Plop
├── src/
│   ├── abstracts/      # TypeScript abstract modules
│   ├── assets/         # Assets such as images, SVGs, etc.
│   ├── components/     # Astro components
│   ├── constants/      # Constants
│   ├── foundation/     # Base processing for TypeScript
│   ├── globals/        # TypeScript processing used throughout the site
│   ├── helper/         # Helper functions used in TypeScript and Astro
│   ├── layouts/        # Astro components for page structure
│   ├── pages/          # Each page generated by Astro
│   ├── projects/       # Astro components managing project-specific patterns
│   ├── styles/         # SCSS files
│   └── types/          # Type definitions
├── static/             # Static assets
├── tasks/              # Processing for npm scripts
└── project.config.mjs  # Common project settings
```

## Commands

| command | detail                                             |
| ------- | -------------------------------------------------- |
| `dev`   | Development mode                                   |
| `build` | Static site generate                               |
| `fix`   | ESLint & Stylelint                                 |
| `plop`  | Create template files                              |
| `w3c`   | Output of W3C Validate report (Please after build) |

## Others

### Husky & lintstaged

Gitコミット時に`eslint`と`stylelint`、`prettier`が実行されます。

### SVG to Sprite

SVGからSpriteデータを生成します。  
対象データは下記に格納してください。  
`/src/assets/svg-sprite/*.svg`

### W3C Validate

`build`後に`w3c`を行うことで、W3Cバリデーターのレポート`report-w3c.txt`が出力されます。  
必要に応じてhtml構文の確認と修正を行ってください。
